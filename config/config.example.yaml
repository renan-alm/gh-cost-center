# ============================================================
# gh-cost-center configuration
# ============================================================
# Authentication is handled by `gh auth login` â€” no token needed here.
#
# Copy this file to config/config.yaml and edit the values below.

# GitHub Configuration
github:
  # GitHub Enterprise name (required)
  enterprise: "your_enterprise_name"

  # GitHub API base URL (optional)
  # Default: "https://api.github.com" (standard GitHub.com)
  #
  # For GitHub Enterprise Data Resident, use:
  #   api_base_url: "https://api.{your-subdomain}.ghe.com"
  #
  # For GitHub Enterprise Server (self-hosted), use:
  #   api_base_url: "https://{your-hostname}/api/v3"
  #
  # Leave commented or set to null to use standard GitHub.com API
  # api_base_url: null

  # Cost Center Assignment Mode
  # Determines how repositories/users are assigned to cost centers
  # Options: 'users', 'teams', or 'repository'
  cost_centers:
    mode: "users"  # Default: user-based assignment (PRU exceptions)

    # ========================================
    # Repository Mode Configuration
    # ========================================
    # Use this mode to assign repositories to cost centers based on custom properties.
    # Requires: Organization custom properties to be configured in your GitHub organization.
    #
    # To enable repository mode:
    # 1. Set mode: "repository" above
    # 2. Configure explicit_mappings below
    # 3. Ensure repositories have the custom properties you're mapping
    #
    repository_config:
      explicit_mappings:
        # Map repositories by team property
        - cost_center: "Platform Engineering"
          property_name: "team"
          property_values:
            - "platform"
            - "infrastructure"
            - "devops"

        # Map by environment
        - cost_center: "Production Services"
          property_name: "environment"
          property_values:
            - "production"

        # Map by service type
        - cost_center: "Frontend Applications"
          property_name: "service"
          property_values:
            - "web"
            - "mobile"
            - "ui"

        # Data team repositories
        - cost_center: "Data & Analytics"
          property_name: "team"
          property_values:
            - "data"
            - "analytics"
            - "ml"

      # NOTES:
      # - If a cost center doesn't exist, it will be created automatically
      # - Repositories can match multiple mappings
      # - Repositories without the specified property will be skipped
      # - Property names and values are case-sensitive

# Logging Configuration
logging:
  level: "INFO"
  file: "logs/cost_centers.log"

# Cost Center Configuration
cost_centers:
  # Manual cost center IDs (only needed when auto_create is false)
  no_prus_cost_center_id: "REPLACE_WITH_NO_PRUS_COST_CENTER_ID"
  prus_allowed_cost_center_id: "REPLACE_WITH_PRUS_ALLOWED_COST_CENTER_ID"

  # Users who should get access to PRU overages (always required)
  prus_exception_users: []
    # - "alice"
    # - "bob"

  # Auto-creation settings (creates cost centers if they don't exist)
  auto_create: true

  # Cost center names (only used when auto_create is true)
  no_prus_cost_center_name: "00 - No PRU overages"
  prus_allowed_cost_center_name: "01 - PRU overages allowed"

# Teams Integration Configuration
teams:
  enabled: false

  # Scope: 'organization' (org-level teams) or 'enterprise' (enterprise-level teams)
  scope: "enterprise"

  # Mode: 'auto' (one cost center per team) or 'manual' (use mappings below)
  mode: "auto"

  # Organizations to query for teams (only used when scope is 'organization')
  organizations: []
    # - "my-org-1"
    # - "my-org-2"

  auto_create_cost_centers: true

  # Full sync: remove users from cost centers when they're no longer in the team
  remove_users_no_longer_in_teams: true

  # Manual team-to-cost-center mappings (only used when mode is 'manual')
  team_mappings: {}
    # "my-org/frontend-team": "CC-FRONTEND-001"
    # "my-org/backend-team": "CC-BACKEND-001"

# ========================================
# Budget Configuration (Optional)
# ========================================
# Configure automatic budget creation for cost centers.
# Use with --create-budgets flag.
budgets:
  enabled: false

  products:
    copilot:
      amount: 100
      enabled: true

    actions:
      amount: 125
      enabled: true

    # Future products
    # packages:
    #   amount: 50
    #   enabled: false
